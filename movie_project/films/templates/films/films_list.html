<!--<!DOCTYPE html>-->
<!--<html lang="ru">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Список фильмов</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--</head>-->
<!--<body class="container mt-5">-->
<!--    <h1 class="mb-4">Список фильмов</h1>-->
<!--    <a href="{% url 'add_film' %}" class="btn btn-success mb-3">Добавить фильм</a>-->
<!--    <div class="list-group">-->
<!--        {% for film in films %}-->
<!--            <div class="list-group-item">-->
<!--                <h5>{{ film.title }}</h5>-->
<!--                <p><strong>Описание:</strong> {{ film.description }}</p>-->
<!--                <p><strong>Отзыв:</strong> {{ film.review }}</p>-->
<!--            </div>-->
<!--        {% empty %}-->
<!--            <p>Фильмов пока нет.</p>-->
<!--        {% endfor %}-->
<!--    </div>-->
<!--</body>-->
<!--</html>-->


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Список фильмов</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5">
    <h1 class="mb-4">Список фильмов</h1>
    <a href="{% url 'add_film' %}" class="btn btn-success mb-3">Добавить фильм</a>
    <div class="list-group">
        {% for film in films %}
            <div class="list-group-item">
                <h5>{{ film.title }}</h5>
                <p><strong>Описание:</strong> {{ film.description }}</p>
                <p>
                    <strong>Отзыв:</strong>
                    {% if film.review|length > 150 %}
                        <!-- Сокращенный текст -->
                        <span id="short-review-{{ film.id }}">
                            {{ film.review|truncatechars:150 }}
                        </span>

                        <!-- Полный текст (скрыт) -->
                        <span id="full-review-{{ film.id }}" style="display: none;">
                            {{ film.review }}
                        </span>

                        <!-- Кнопка переключения -->
                        <button class="btn btn-link p-0 text-decoration-none"
                                onclick="toggleFullReview({{ film.id }})">
                            <span id="toggle-text-{{ film.id }}">Показать полностью</span>
                        </button>
                    {% else %}
                        {{ film.review }}
                    {% endif %}
                </p>
            </div>
        {% empty %}
            <p>Фильмов пока нет.</p>
        {% endfor %}
    </div>

    <script>
        function toggleFullReview(filmId) {
            const shortReview = document.getElementById(`short-review-${filmId}`);
            const fullReview = document.getElementById(`full-review-${filmId}`);
            const toggleText = document.getElementById(`toggle-text-${filmId}`);

            if (fullReview.style.display === 'none') {
                shortReview.style.display = 'none';
                fullReview.style.display = 'inline';
                toggleText.textContent = 'Свернуть';
            } else {
                shortReview.style.display = 'inline';
                fullReview.style.display = 'none';
                toggleText.textContent = 'Показать полностью';
            }
        }
    </script>
</body>
</html>